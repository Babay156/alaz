apiVersion: v1
kind: Pod
metadata:
  name: k8s-informer-pod
  namespace: ddosify
spec:
  serviceAccountName: alaz-serviceaccount   
  containers:
  - name: k8s-informer
    image: 158138719754.dkr.ecr.eu-central-2.amazonaws.com/alaz:k8s-informer
    securityContext:
      privileged: true
      runAsUser: 0
      capabilities:
        add:
          - BPF
          - PERFMON
          - NET_ADMIN
          - SYS_RESOURCE
    volumeMounts:
      - mountPath: /sys/kernel/debug
        name: debugfs
        readOnly: false
      - mountPath: /var/run/containerd/containerd.sock
        name: containerd-sock
        readOnly: true
  volumes:
    - name: debugfs
      hostPath:
        path: /sys/kernel/debug
    - hostPath:
          path: /var/run/containerd/containerd.sock
      name: containerd-sock
